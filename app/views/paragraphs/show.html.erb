<div class="container mt-4">
  <h2 class="mb-4"><%= @paragraph.title %></h2>

  <% random_paragraph_color = "hsl(#{rand(360)}, #{rand(30..70)}%, #{rand(80..95)}%)" %>
  <div class="card mb-4 p-3 shadow-sm" style="background-color: <%= random_paragraph_color %>;">
    <div class="card-body">
      <h5 class="card-title">Paragraph Content</h5>
      <p class="card-text"><%= @paragraph.content %></p>
    </div>
  </div>

  <h3>Generated Flashcards</h3>
  <% if @paragraph.questions.any? %>
    <div class="row">
      <% @paragraph.questions.each do |question| %>
        <% random_light_color = "hsl(#{rand(360)}, #{rand(30..70)}%, #{rand(80..95)}%)" %>
        <div class="col-md-4 mb-4">
          <div class="card p-3 shadow-sm question-card" data-bs-toggle="modal" data-bs-target="#answerModal<%= question.id %>" style="background-color: <%= random_light_color %>;">
            <div class="card-body">
              <h5 class="card-title">Q: <%= question.question %></h5>
            </div>
          </div>
        </div>

        <div class="modal fade" id="answerModal<%= question.id %>" tabindex="-1" aria-labelledby="answerModalLabel<%= question.id %>" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content" style="background-color: <%= random_light_color %>;">
              <div class="modal-header">
                <h5 class="modal-title" id="answerModalLabel<%= question.id %>">Flashcard</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p><strong>Question:</strong> <%= question.question %></p>
                <% if question.answers.any? %>
                  <ul>
                    <% question.answers.each do |answer| %>
                      <li>
                        <strong>Answer:</strong> <%= answer.answer %>
                      </li>
                    <% end %>
                  </ul>
                <% else %>
                  <p class="text-muted">No answers available</p>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p>No flashcards generated yet.</p>
  <% end %>

  <div class="mt-4">
    <%= link_to "Back to Paragraphs", subject_chapter_paragraphs_path(@chapter.subject, @chapter), class: "btn btn-secondary" %>
  </div>
</div>